<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1>Add Food Product</h1>
      <button class="btn btn-dark" routerLink="/products">Go Back</button>
    </div>

    <!-- Form for adding food products -->
    <form class="col-md-6 offset-md-3" [formGroup]="addProductForm" (ngSubmit)="handleAddProduct()">
      
      <!-- Product Name -->
      <div class="form-group row mb-3">
        <label for="nameInput" class="col-sm-2 col-form-label">Product Name</label>
        <div class="col-sm-10">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Product Name"
            formControlName="name"
            [ngClass]="{
              'is-invalid': addProductForm.get('name')?.touched && addProductForm.get('name')?.invalid
            }"
          />
          <div class="invalid-feedback">
            <div *ngIf="addProductForm.get('name')?.hasError('required')">Product Name is required</div>
          </div>
        </div>
      </div>

      <!-- Price -->
      <div class="form-group row mb-3">
        <label for="priceInput" class="col-sm-2 col-form-label">Price</label>
        <div class="col-sm-10">
          <input
            type="number"
            class="form-control"
            placeholder="Enter Price"
            formControlName="price"
            [ngClass]="{
              'is-invalid': addProductForm.get('price')?.touched && addProductForm.get('price')?.invalid
            }"
            min="0"
            step="0.01"
          />
          <div class="invalid-feedback">
            <div *ngIf="addProductForm.get('price')?.hasError('required')">Price is required</div>
          </div>
        </div>
      </div>

      <!-- Quantity -->
      <div class="form-group row mb-3">
        <label for="quantityInput" class="col-sm-2 col-form-label">Quantity</label>
        <div class="col-sm-10">
          <input
            type="number"
            class="form-control"
            placeholder="Enter Quantity"
            formControlName="quantity"
            [ngClass]="{
              'is-invalid': addProductForm.get('quantity')?.touched && addProductForm.get('quantity')?.invalid
            }"
            min="1"
          />
          <div class="invalid-feedback">
            <div *ngIf="addProductForm.get('quantity')?.hasError('required')">Quantity is required</div>
          </div>
        </div>
      </div>

      <!-- Category -->
      <div class="form-group row mb-3">
        <label for="categoryInput" class="col-sm-2 col-form-label">Category</label>
        <div class="col-sm-10">
          <select
            class="form-control"
            formControlName="category"
            [ngClass]="{
              'is-invalid': addProductForm.get('category')?.touched && addProductForm.get('category')?.invalid
            }"
          >
            <option value="">Select Category</option>
            <option value="Half">Half</option>
            <option value="Full">Full</option>
          </select>
          <div class="invalid-feedback">
            <div *ngIf="addProductForm.get('category')?.hasError('required')">Category is required</div>
          </div>
        </div>
      </div>

      <!-- Success/Error Messages -->
      <div class="position-fixed bottom-0 end-0 p-3">
        <div *ngIf="isSaved" class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <strong class="me-auto">Success</strong>
            <button type="button" class="btn-close" (click)="isSaved = false" aria-label="Close"></button>
          </div>
          <div class="toast-body">Saved Successfully</div>
        </div>
        
        <div *ngIf="!isSaved && showError" class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <strong class="me-auto text-danger">Error</strong>
            <button type="button" class="btn-close" (click)="showError = false" aria-label="Close"></button>
          </div>
          <div class="toast-body">Unable to create product. Some error occurred. Try again later.</div>
        </div>
      </div>

      <!-- Submit Button -->
      <div class="form-group row">
        <div class="col-sm-10 offset-sm-2">
          <button type="submit" class="btn btn-primary submitBtn" [disabled]="addProductForm.invalid">
            Submit
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
